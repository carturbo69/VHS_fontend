@model List<VHS_frontend.Areas.Provider.Models.Notification.ProviderNotificationDTO>

@if (Model == null || !Model.Any())
{
    <li class="text-center py-3" style="color: var(--muted-fg);">
        <i class="bi bi-inbox" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
        <small>Không có thông báo nào</small>
    </li>
}
else
{
    @foreach (var notification in Model)
    {
        <li class="notification-item @(notification.IsRead == true ? "read" : "unread")" data-notification-id="@notification.NotificationId">
            <a href="#" class="d-block text-decoration-none px-2 py-2" onclick="markProviderRead('@notification.NotificationId'); return false;">
                <div class="notification-content">
                    <div class="d-flex align-items-center gap-2 mb-1">
                        @if (notification.IsRead != true)
                        {
                            <i class="bi bi-circle-fill" style="font-size: 0.4rem; color: var(--primary);"></i>
                        }
                        @if (!string.IsNullOrEmpty(notification.NotificationType))
                        {
                            <span class="badge badge-@(notification.NotificationType.ToLower())">@notification.NotificationType</span>
                        }
                    </div>
                    <div class="notification-text">@notification.Content</div>
                    <div class="notification-meta mt-1">
                        <small>
                            <i class="bi bi-clock" style="font-size: 0.75rem;"></i>
                            @(notification.CreatedAt?.ToString("dd/MM/yyyy HH:mm") ?? "N/A")
                        </small>
                    </div>
                </div>
            </a>
            <button class="btn btn-sm" style="position: absolute; top: 8px; right: 8px; border: none; background: transparent; color: var(--danger); opacity: 0.6;" 
                    title="Xóa" 
                    onclick="deleteProviderNotification('@notification.NotificationId'); event.stopPropagation(); return false;"
                    onmouseover="this.style.opacity='1'"
                    onmouseout="this.style.opacity='0.6'">
                <i class="bi bi-x-lg" style="font-size: 0.9rem;"></i>
            </button>
        </li>
    }
    
    <hr class="my-2" style="border-color: var(--border); opacity: 0.5;">
    <li style="padding: 4px;">
        <a href="#" class="d-block text-center text-decoration-none py-2 px-2" 
           style="color: var(--primary); font-weight: 500; border-radius: 8px; transition: all 0.2s ease;"
           onclick="markProviderAllRead(); return false;"
           onmouseover="this.style.background='var(--muted)'"
           onmouseout="this.style.background='transparent'">
            <i class="bi bi-check-all me-1"></i>
            Đánh dấu tất cả đã đọc
        </a>
    </li>
    <li style="padding: 4px;">
        <a href="/Provider/ProviderNotification/Index" class="d-block text-center text-decoration-none py-2 px-2" 
           style="color: var(--fg); font-weight: 500; border-radius: 8px; transition: all 0.2s ease;"
           onmouseover="this.style.background='var(--muted)'"
           onmouseout="this.style.background='transparent'">
            <i class="bi bi-inbox-fill me-1"></i>
            Xem tất cả thông báo
        </a>
    </li>
}

