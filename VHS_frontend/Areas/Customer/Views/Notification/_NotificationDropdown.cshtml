@model VHS_frontend.Areas.Customer.Models.Notification.NotificationListResponse

<div class="notification-dropdown" id="notificationDropdown">
    <div class="dropdown-header">
        <h3>Thông báo</h3>
        @if (Model.Data.Any())
        {
            <button type="button" class="btn-mark-all" id="markAllReadDropdown">
                Đánh dấu tất cả đã đọc
            </button>
        }
    </div>

    <div class="dropdown-content">
        @if (Model.Data.Any())
        {
            <div class="notification-items">
                @foreach (var notification in Model.Data.Take(5))
                {
                    <div class="notification-item @(notification.IsRead ? "read" : "unread")" 
                         data-notification-id="@notification.NotificationId">
                        
                        <div class="item-icon">
                            @switch (notification.NotificationType.ToLower())
                            {
                                case "booking":
                                    <i class="icon-calendar"></i>
                                    break;
                                case "payment":
                                    <i class="icon-credit-card"></i>
                                    break;
                                case "system":
                                    <i class="icon-settings"></i>
                                    break;
                                default:
                                    <i class="icon-bell"></i>
                                    break;
                            }
                        </div>
                        
                        <div class="item-content">
                            <div class="content-text">@notification.Content</div>
                            <div class="item-time">@notification.CreatedAt.ToString("dd/MM HH:mm")</div>
                        </div>
                        
                        @if (!notification.IsRead)
                        {
                            <div class="unread-dot"></div>
                        }
                    </div>
                }
            </div>

            @if (Model.Data.Count > 5)
            {
                <div class="dropdown-footer">
                    <a asp-area="Customer" asp-controller="Notification" asp-action="Index" class="view-all-link">
                        Xem tất cả (@Model.Data.Count)
                    </a>
                </div>
            }
            else if (Model.Data.Count > 0)
            {
                <div class="dropdown-footer">
                    <a asp-area="Customer" asp-controller="Notification" asp-action="Index" class="view-all-link">
                        Xem tất cả
                    </a>
                </div>
            }
        }
        else
        {
            <div class="empty-dropdown">
                <div class="empty-icon">
                    <i class="icon-bell-off"></i>
                </div>
                <p>Không có thông báo mới</p>
            </div>
        }
    </div>
</div>
