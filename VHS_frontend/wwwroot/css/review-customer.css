/* ==================== Color system ==================== */
/* LIGHT */
:root {
    --background: #fff;
    --foreground: #0f172a;
    --card: #ffffff;
    --panel: #ffffff;
    --muted: #f7fafc;
    --muted-foreground: #667085;
    --border: #eceef3;
    --accent: #1abc9c; /* màu nhấn mặc định */
    --accent-soft: color-mix(in srgb, var(--accent) 6%, #ffffff);
    --primary-foreground: #ffffff;
    --info: #0ea5e9;
    --danger: #ef4444;
    --shadow-1: 0 10px 24px rgba(15,23,42,.06);
    --shadow-2: 0 -8px 24px rgba(2,6,23,.06);
    --shadow-3: 0 16px 32px rgba(2,6,23,.12);
    --gap: 16px;
    --pad-x: 16px;
    --pad-y: 14px;
    --radius-outer: 20px;
    --radius-inner: 14px;
    --ring: 2px solid color-mix(in srgb, var(--accent) 50%, var(--border));
    color-scheme: light;
}
    /* DARK */
    :root.dark {
        --background: #121212;
        --foreground: #fff;
        --card: #1f1f1f;
        --panel: #1f1f1f;
        --muted: #161616;
        --muted-foreground: #9ca3af;
        --border: #2b2b2b;
        --accent: #1abc9c;
        --accent-soft: color-mix(in srgb, var(--accent) 12%, #1f1f1f);
        --primary-foreground: #121212;
        --info: #36bffa;
        --danger: #ef4444;
        --shadow-1: 0 10px 24px rgba(0,0,0,.35);
        --shadow-2: 0 -8px 24px rgba(0,0,0,.35);
        --shadow-3: 0 16px 32px rgba(0,0,0,.45);
        --ring: 2px solid color-mix(in srgb, var(--accent) 55%, var(--border));
        color-scheme: dark;
    }

/* ==================== Base / helpers ==================== */
* {
    box-sizing: border-box
}

img {
    max-width: 100%;
    display: block
}

button {
    cursor: pointer
}

.rv-no-scroll {
    overflow: hidden
}

/* ==================== Layout ==================== */
.rv-container {
    max-width: 980px;
    margin: 28px auto 72px;
    padding: 0 var(--pad-x);
    color: var(--foreground);
    background: var(--background);
}

.rv-header {
    margin-bottom: 10px
}

.rv-title {
    margin: 0 0 6px;
    font-weight: 800;
    font-size: clamp(22px,2.8vw,30px)
}

.rv-subtitle {
    margin: 0;
    color: var(--muted-foreground)
}

/* ========= Product grouping cues (không cần đổi HTML) ========= */
/* mỗi .rv-item có dải màu trái + nền panel nhạt để “đánh dấu sản phẩm” */
.rv-item {
    position: relative;
    margin-top: 18px;
    padding-top: 6px; /* chừa khoảng cho divider */
}

    .rv-item::before {
        content: "";
        position: absolute;
        inset: 0 auto 0 0;
        width: 6px;
        border-radius: 8px;
        background: var(--accent);
        opacity: .9;
    }
    /* divider đậm giữa các sản phẩm (mỗi review nhìn như 1 block tách rời) */
    .rv-item + .rv-item {
        margin-top: 22px;
    }

        .rv-item + .rv-item::after {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            top: -12px;
            height: 12px;
            background: linear-gradient(to bottom, color-mix(in srgb, var(--border) 60%, transparent) 0%, transparent 100%);
            pointer-events: none;
        }

/* ==================== Card ==================== */
.rv-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-outer);
    padding: var(--pad-y) var(--pad-x);
    box-shadow: var(--shadow-1);
}

/* ==================== User ==================== */
.rv-user {
    display: flex;
    gap: 12px;
    align-items: center
}

.rv-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    background: var(--muted);
    border: 1px solid var(--border)
}

.rv-user-info {
    display: grid;
    gap: 4px
}

.rv-username {
    font-weight: 700
}

.rv-rating-row {
    display: flex;
    align-items: center;
    gap: 8px
}

.rv-stars {
    letter-spacing: .5px
}

.rv-rating-text {
    color: var(--muted-foreground);
    font-size: 14px
}

.rv-meta {
    color: var(--muted-foreground);
    font-size: 13px;
    display: flex;
    align-items: center;
    gap: 8px
}

.rv-dot {
    opacity: .55
}

.rv-likes i {
    margin-right: 4px
}

/* ==================== Comment ==================== */
.rv-comment {
    margin-top: 10px;
    line-height: 1.65;
    white-space: pre-wrap
}

/* ==================== Gallery ==================== */
.rv-gallery {
    margin-top: 12px;
    display: grid;
    gap: 8px;
    grid-template-columns: repeat(5,1fr)
}

.rv-g-thumb {
    position: relative;
    border: 0;
    padding: 0;
    background: transparent;
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 1/1;
    outline: 1px solid var(--border);
    transition: transform .06s
}

    .rv-g-thumb:focus-visible {
        outline: var(--ring)
    }

    .rv-g-thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform .25s
    }

    .rv-g-thumb:hover img {
        transform: scale(1.04)
    }

.rv-g-more {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    background: rgba(0,0,0,.45);
    color: #fff;
    font-weight: 700;
    font-size: 18px
}

/* ==================== Seller reply ==================== */
.rv-reply {
    margin-top: 12px;
    background: var(--panel);
    border: 1px dashed var(--border);
    padding: 12px;
    border-radius: var(--radius-inner)
}

.rv-reply-label {
    display: inline-block;
    margin-bottom: 6px;
    color: var(--accent);
    font-weight: 700
}

.rv-reply-body {
    line-height: 1.6
}

/* ==================== Product footer (nhấn mạnh sản phẩm) ==================== */
.rv-product-section {
    margin-top: 12px;
    padding: 12px;
    background: var(--accent-soft);
    border: 1px solid color-mix(in srgb, var(--accent) 30%, var(--border));
    border-left: 6px solid var(--accent);
    border-radius: 16px;
    display: grid;
    grid-template-columns: 72px 1fr auto;
    gap: 12px;
    align-items: center;
    box-shadow: var(--shadow-2);
}

.rv-thumb {
    width: 72px;
    height: 72px;
    object-fit: cover;
    border-radius: 12px;
    border: 1px solid color-mix(in srgb, var(--accent) 15%, var(--border));
    background: var(--muted)
}

.rv-prod-title {
    margin: 0;
    font-weight: 800;
    display: inline-block;
    padding: 4px 10px;
    background: color-mix(in srgb, var(--accent) 12%, transparent);
    border: 1px solid color-mix(in srgb, var(--accent) 35%, var(--border));
    border-radius: 999px;
}

/* Buttons */
.rv-actions {
    display: flex;
    gap: 8px
}

.rv-inline-form {
    display: inline
}

.rv-btn {
    appearance: none;
    border-radius: 12px;
    padding: 8px 12px;
    font-weight: 700;
    font-size: 14px;
    border: 1px solid var(--border);
    background: var(--panel);
    color: var(--foreground);
    transition: transform .05s, background .15s, border-color .15s
}

    .rv-btn:hover {
        background: color-mix(in srgb, var(--panel) 80%, var(--muted) 20%)
    }

    .rv-btn:active {
        transform: translateY(1px)
    }

    .rv-btn:focus-visible {
        outline: var(--ring)
    }

    .rv-btn.edit-btn {
        border-color: color-mix(in srgb, var(--accent) 55%, var(--border));
        color: var(--accent);
        background: transparent
    }

    .rv-btn.delete {
        border-color: color-mix(in srgb, var(--danger) 45%, var(--border));
        color: var(--danger);
        background: transparent
    }

/* ==================== Empty state ==================== */
.rv-empty {
    margin-top: 18px;
    text-align: center;
    padding: 40px 16px;
    border: 2px dashed var(--border);
    border-radius: var(--radius-outer);
    background: var(--card);
    box-shadow: var(--shadow-1)
}

.rv-empty-icon {
    font-size: 40px;
    margin-bottom: 8px
}

.rv-empty-text {
    color: var(--muted-foreground);
    margin: 0
}

/* ==================== Custom image viewer ==================== */
.rv-modal {
    position: fixed;
    inset: 0;
    z-index: 1080;
    display: grid;
    place-items: center;
    background: rgba(0,0,0,.7);
    backdrop-filter: blur(2px)
}

    .rv-modal[hidden] {
        display: none
    }

#rvModalImg {
    max-width: 92vw;
    max-height: 82vh;
    border-radius: 14px;
    box-shadow: var(--shadow-3);
    background: #000
}

.rv-close, .rv-prev, .rv-next {
    position: absolute;
    border: 0;
    color: #fff;
    background: rgba(0,0,0,.5);
    width: 42px;
    height: 42px;
    border-radius: 999px;
    display: grid;
    place-items: center
}

.rv-close {
    top: 16px;
    right: 16px
}

.rv-prev {
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 22px
}

.rv-next {
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 22px
}

    .rv-close:focus-visible, .rv-prev:focus-visible, .rv-next:focus-visible {
        outline: var(--ring)
    }

/* ==================== Forms ==================== */
.form-label {
    font-weight: 700
}

.form-text {
    color: var(--muted-foreground)
}

/* ==================== Edit modal: grid 5 ảnh ==================== */
.rv-slot-grid {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(5,1fr)
}

.rv-slot {
    position: relative;
    border: 1px solid var(--border);
    border-radius: 12px;
    background: var(--panel);
    overflow: hidden;
    aspect-ratio: 1/1;
    box-shadow: var(--shadow-1)
}

    .rv-slot img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block
    }

.rv-xbtn {
    position: absolute;
    top: 6px;
    right: 6px;
    width: 28px;
    height: 28px;
    border-radius: 999px;
    border: 0;
    color: #fff;
    background: rgba(0,0,0,.5);
    font-weight: 700;
    line-height: 1;
    display: grid;
    place-items: center
}

    .rv-xbtn:hover {
        background: rgba(0,0,0,.7)
    }

.rv-slot-add {
    display: grid;
    place-items: center;
    background: var(--muted);
    border: 1px dashed var(--border)
}

.rv-addbtn {
    border: 0;
    background: transparent;
    color: var(--foreground);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    font-weight: 700
}

    .rv-addbtn .plus {
        font-size: 28px;
        line-height: 1;
        color: var(--accent)
    }

.rv-file {
    display: none
}

/* ==================== Responsive ==================== */
@media (max-width:720px) {
    .rv-gallery {
        grid-template-columns: repeat(3,1fr)
    }

    .rv-product-section {
        grid-template-columns: 56px 1fr;
        grid-auto-flow: row
    }

    .rv-thumb {
        width: 56px;
        height: 56px
    }

    .rv-slot-grid {
        grid-template-columns: repeat(3,1fr)
    }
}

/* ======= Star picker (modal) ======= */
.rv-stars-input {
    display: flex;
    gap: 8px;
    align-items: center;
    user-select: none;
}

.rv-star {
    border: 0;
    background: transparent;
    font-size: 28px;
    line-height: 1;
    padding: 2px 4px;
    color: #cbd5e1; /* sao trống */
    transition: transform .06s, color .15s;
    border-radius: 6px;
}

    .rv-star.is-on {
        color: #f59e0b; /* sao đã chọn */
    }

    .rv-star:hover {
        transform: translateY(-1px) scale(1.02);
    }

    .rv-star:focus-visible {
        outline: var(--ring);
    }
.rv-btn[disabled],
.rv-btn[aria-disabled="true"] {
    opacity: 0.55;
    cursor: not-allowed;
    pointer-events: auto; /* vẫn nhận tooltip */
}

    .rv-btn[disabled]:hover,
    .rv-btn[aria-disabled="true"]:hover {
        text-decoration: none;
    }
