<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewData["Title"] - Viet Home Service</title>

    <!-- Font đẹp: Plus Jakarta Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

    <!-- CSS chung -->
    <link rel="stylesheet" href="~/css/header.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/about.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/footer.css" asp-append-version="true" />


    @* THÊM DÒNG NÀY để các view bơm CSS riêng *@
    @RenderSection("Styles", required: false)

    <!-- CSS riêng cho trang Login/Register -->
    @if (ViewData["Title"]?.ToString() == "Đăng nhập" || ViewData["Title"]?.ToString() == "Đăng ký")
    {
        <link rel="stylesheet" href="~/css/auth.css" asp-append-version="true" />
    }
</head>
<body class="min-h-screen bg-background text-foreground font-sans antialiased">
    @await Html.PartialAsync("_Header")

    <main id="main">
        @RenderBody()
    </main>

    @await Html.PartialAsync("_Footer")

    <script>
        // Theme toggle
        (function () {
          const KEY = "vhs-theme";
          const root = document.documentElement;
          const saved = localStorage.getItem(KEY);
          const apply = t => t==="dark" ? root.classList.add("dark") : root.classList.remove("dark");
          if (saved==="light"||saved==="dark") apply(saved);
          else apply(matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
          window.__toggleTheme = function(){
            const next = root.classList.contains("dark") ? "light" : "dark";
            localStorage.setItem(KEY, next); apply(next);
          };
        })();

        // Smooth scroll cho anchor
        document.addEventListener("click", (e) => {
          const a = e.target.closest('a[href^="#"]');
          if (!a) return;
          const id = a.getAttribute("href");
          const el = document.querySelector(id);
          if (el) { e.preventDefault(); el.scrollIntoView({ behavior: "smooth", block: "start" }); }
        });
    </script>

    @RenderSection("Scripts", required: false)
</body>
</html>
